<%# zusatz meta tags, die nicht mit display_meta_tags ausgespielt werden %>
<meta charset="utf-8">

<%= display_meta_tags unless options[:exclude] && options[:exclude].include?("metatags") %>

<%= stylesheet_link_tag "goldencobra/application", :media => "all" unless options[:exclude] && options[:exclude].include?("stylesheets") %>

<%# TODO: javascripts einzeln excluden koennen, nicht nur gemeinsam in application.js %>
<%= javascript_include_tag "goldencobra/application" unless options[:exclude] && options[:exclude].include?("javascripts") %>

<%= bugtracker unless options[:exclude] && options[:exclude].include?("bugtracker") %>

<%= edit_article_link unless options[:exclude] && options[:exclude].include?("article_administration") %>

<%#= airbrake_javascript_notifier unless options[:exclude] && options[:exclude].include?("airbrake") %>
<%# Geht nicht. %>

<% if @current_user.present? && Goldencobra::Setting.for_key("goldencobra.article.frontend_inline_editor") == "true" %>
	<% unless options[:exclude] && options[:exclude].include?("editor") %>
	<%= javascript_include_tag "rest_in_place" %>
	<script src="/assets/ckeditor/ckeditor.js" type="text/javascript"></script>
	<script>
	CKEDITOR.disableAutoInline = true;
	var CKEDITOR_BASEPATH = '<%= "#{Rails.application.config.assets.prefix}/ckeditor/" %>';
	CKEDITOR.editorConfig = function( config ) {
		// Define changes to default configuration here.
		// For the complete reference:
		// http://docs.ckeditor.com/#!/api/CKEDITOR.config

		// The toolbar groups arrangement, optimized for a single toolbar row.
		config.toolbarGroups = [
			{ name: 'document',	   groups: [ 'mode', 'document', 'doctools' ] },
			{ name: 'clipboard',   groups: [ 'clipboard', 'undo' ] },
			{ name: 'editing',     groups: [ 'find', 'selection', 'spellchecker' ] },
			{ name: 'forms' },
			{ name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
			{ name: 'paragraph',   groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ] },
			{ name: 'links' },
			{ name: 'insert' },
			{ name: 'styles' },
			{ name: 'colors' },
			{ name: 'tools' },
			{ name: 'others' },
			{ name: 'about' }
		];

		// The default plugins included in the basic setup define some buttons that
		// we don't want too have in a basic editor. We remove them here.
		config.removeButtons = 'Cut,Copy,Paste,Undo,Redo,Anchor,Underline,Strike,Subscript,Superscript';

		// Let's have it basic on dialogs as well.
		config.removeDialogTabs = 'link:advanced';
	};

	</script>
	<link rel="stylesheet" type="text/css" href="/assets/goldencobra/editor.css?t=DBAA">
	<script src="/assets/ckeditor/jquery.js?body=1" type="text/javascript"></script>
	<script src="/assets/ckeditor-jquery.js?body=1" type="text/javascript"></script>
	<% end %>
<% end %>
